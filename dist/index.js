"use strict";var u=function(r,e){return function(){return e||r((e={exports:{}}).exports,e),e.exports}};var c=u(function(Z,p){"use strict";function A(){return{persist:!1}}p.exports=A});var g=u(function($,h){"use strict";var I=require("@stdlib/assert-is-plain-object"),S=require("@stdlib/assert-has-own-property"),j=require("@stdlib/assert-is-boolean").isPrimitive,y=require("@stdlib/string-format");function N(r,e){return I(e)?S(e,"persist")&&(r.persist=e.persist,!j(r.persist))?new TypeError(y("invalid option. `%s` option must be a boolean. Option: `%s`.","persist",r.persist)):null:new TypeError(y("invalid argument. Options argument must be an object. Value: `%s`.",e))}h.exports=N});var v=u(function(ee,m){"use strict";var P=require("@stdlib/dstructs-linked-list"),k=new P;m.exports=k});var b=u(function(re,w){"use strict";var C=v();function F(r){for(var e=C.first();e;){if(e.value.id===r)return e;e=e.next}return null}w.exports=F});var x=u(function(te,_){"use strict";var q=-1;function R(){return q+=1,q.toString()}_.exports=R});var O=u(function(ae,T){"use strict";var d=require("@stdlib/utils-define-nonenumerable-read-only-accessor"),o=require("@stdlib/utils-define-nonenumerable-read-only-property"),B=require("@stdlib/utils-define-nonenumerable-property"),J=require("@stdlib/assert-is-collection"),L=require("@stdlib/assert-is-boolean").isPrimitive,V=require("@stdlib/assert-is-integer").isPrimitive,G=require("@stdlib/array-base-assert-is-accessor-array"),U=require("@stdlib/array-to-json"),z=require("@stdlib/array-dtype"),D=require("@stdlib/array-base-copy"),H=require("@stdlib/array-base-resolve-getter"),K=require("@stdlib/string-format"),M=c(),Q=g(),f=v(),E=b(),W=x();function a(r){var e,t,n,i,s,l;if(!(this instanceof a))return arguments.length>1?new a(r,arguments[1]):new a(r);if(!J(r))throw new TypeError(K("invalid argument. First argument must be an array-like object. Value: `%s`.",r));if(i=z(r),i==="generic"||i===null)if(r.length>0)if(n=H(r),l=n(r,0),L(l))s="bool";else if(V(l))s="int";else throw new TypeError("invalid argument. First argument must be a valid index array.");else s="int";else if(i==="int32")s="int";else if(i==="uint8")s="mask";else if(i==="bool")s="bool";else throw new TypeError("invalid argument. First argument must be a valid index array.");if(e=M(),arguments.length>1&&(t=Q(e,arguments[1]),t))throw t;return f.push({id:W(),ref:this,data:r,type:s,dtype:i,persist:e.persist}),o(this,"_node",f.last()),B(this,"_invalidated",!1),this}o(a,"name","ArrayIndex");o(a,"free",function(e){var t,n;return t=E(e),t===null?!1:(n=t.value,o(n.ref,"_invalidated",!0),f.remove(t),n.data=null,!0)});o(a,"get",function(e){var t,n,i;return t=E(e),t===null?null:(i=t.value,n={data:i.data,type:i.type,dtype:i.dtype},i.persist||a.free(e),n)});d(a.prototype,"data",function(){if(this._invalidated)throw new Error("invalid operation. This array index instance has already been freed and can no longer be used.");return this._node.value.data});d(a.prototype,"dtype",function(){if(this._invalidated)throw new Error("invalid operation. This array index instance has already been freed and can no longer be used.");return this._node.value.dtype});d(a.prototype,"id",function(){if(this._invalidated)throw new Error("invalid operation. This array index instance has already been freed and can no longer be used.");return this._node.value.id});d(a.prototype,"isCached",function(){return!this._invalidated});d(a.prototype,"type",function(){if(this._invalidated)throw new Error("invalid operation. This array index instance has already been freed and can no longer be used.");return this._node.value.type});o(a.prototype,"toString",function(){var e;if(this._invalidated)throw new Error("invalid operation. This array index instance has already been freed and can no longer be used.");return e=this._node.value,"ArrayIndex<"+e.id+">"});o(a.prototype,"toJSON",function(){var e,t;if(this._invalidated)throw new Error("invalid operation. This array index instance has already been freed and can no longer be used.");return e=this._node.value,e.dtype==="generic"||e.dtype===null?G(e.data)?t=D(e.data):t=e.data:t=U(e.data),{type:"ArrayIndex",data:t}});T.exports=a});var X=O();module.exports=X;
/**
* @license Apache-2.0
*
* Copyright (c) 2024 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
//# sourceMappingURL=index.js.map
